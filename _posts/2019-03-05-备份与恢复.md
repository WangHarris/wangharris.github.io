---
layout: post
title: "备份与恢复"
date: 2019-03-05
excerpt: ""
tags: [linux]
comments: true
---



1. Linux需要备份的数据

   - /root/目录
   - /home/目录
   - /var/spool/mail/目录
   - /etc/目录
   - /var/log/目录
   - 安装的服务的数据，例如：apache、mysql等。
   - 其他目录

2. 备份策略

   - 完全备份
   - 增量备份：备份那些在前一次备份的基础上新增的数据
   - 差异备份：永远只备份比第一次原始备份变化的数据

3. dump命令

   ```shell
   dump [选项] 备份之后的文件名 源文件或目录
   ```

   选项：

   - -[level]：0~9十个备份级别，0表示完全备份，1表示增量备份。

     **注意：只有分区能增量备份，普通文件或目录只能完全备份。**

   - -f 文件名：指定备份之后的文件名。

   - -u：备份成功之后，把备份时间记录在/etc/dumpdates文件。

   - -j：调用bzlib库压缩备份文件，其实就是把备份文件压缩为.bz2格式。

4. restore命令

   ```shell
   restore [模式选项] [选项]
   ```

   模式选项一般有以下四中，这四个模式不能混用：

   - -C：比较备份数据和实际数据的变化
   - -i：进入交互模式，手工选择需要恢复的文件
   - -t：查看模式，用于查看备份文件中拥有哪些数据
   - -r：还原模式，用于还原数据

   选项：

   - -f：指定备份文件的文件名

